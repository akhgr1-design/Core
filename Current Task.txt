
/**
 * ========================================================================
 * COMPLETE CHILLER CONTROL SYSTEM - 4 FILE ARCHITECTURE
 * ========================================================================
 * 
 * SYSTEM OVERVIEW:
 * This chiller control system is divided into 4 logical modules for 
 * maintainability and clarity. Each file handles a specific aspect of
 * the chiller control system.
 * 
 * ========================================================================
 * FILE STRUCTURE:
 * ========================================================================
 * 
 * 1. ch_control_core.h/.c     - CORE CONTROL SYSTEM
 *    â””â”€â”€ System states, initialization, main control loop
 *    â””â”€â”€ Integration with equipment_config.h
 *    â””â”€â”€ System monitoring and diagnostics
 * 
 * 2. ch_temp_control.h/.c     - TEMPERATURE CONTROL
 *    â””â”€â”€ PID control algorithms
 *    â””â”€â”€ Temperature sensors management
 *    â””â”€â”€ Setpoint management and ambient compensation
 * 
 * 3. ch_staging.h/.c          - EQUIPMENT STAGING
 *    â””â”€â”€ Compressor start/stop control
 *    â””â”€â”€ Condenser bank management
 *    â””â”€â”€ Four-tier capacity control
 *    â””â”€â”€ Runtime balancing and lead/lag rotation
 * 
 * 4. ch_safety.h/.c           - SAFETY & PROTECTION
 *    â””â”€â”€ Safety interlocks and fault detection
 *    â””â”€â”€ Emergency stop handling
 *    â””â”€â”€ Equipment protection systems
 *    â””â”€â”€ Alarm management
 * 
 * ========================================================================
 * INTEGRATION WITH YOUR EXISTING SYSTEM:
 * ========================================================================
 * 
 * HARDWARE MAPPING (matches your existing GPIO):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ EQUIPMENT           â”‚ GPIO RELAY          â”‚ CONTROL FILE        â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ Compressor 1        â”‚ Q0.0 â†’ PE5 (Relay0) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 2        â”‚ Q0.1 â†’ PB8 (Relay1) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 3        â”‚ Q0.2 â†’ PE2 (Relay2) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 4        â”‚ Q0.3 â†’ PB9 (Relay3) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 5        â”‚ Q0.4 â†’ PE3 (Relay4) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 6        â”‚ Q0.5 â†’ PE4 (Relay5) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 7        â”‚ Q0.6 â†’ PE6 (Relay6) â”‚ ch_staging.c        â”‚
 * â”‚ Compressor 8        â”‚ Q0.7 â†’ PA10(Relay7) â”‚ ch_staging.c        â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ Condenser Bank 1    â”‚ Q1.0 â†’ PH0 (Relay8) â”‚ ch_staging.c        â”‚
 * â”‚ Condenser Bank 2    â”‚ Q1.1 â†’ PH1 (Relay9) â”‚ ch_staging.c        â”‚
 * â”‚ Condenser Bank 3    â”‚ Q1.2 â†’ PC0(Relay10) â”‚ ch_staging.c        â”‚
 * â”‚ Condenser Bank 4    â”‚ Q1.3 â†’ PC1(Relay11) â”‚ ch_staging.c        â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * SAFETY INPUTS (matches your existing GPIO):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ SAFETY INPUT        â”‚ GPIO INPUT          â”‚ CONTROL FILE        â”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚ Emergency Stop      â”‚ I0.0 â†’ PA0 (Input0) â”‚ ch_safety.c         â”‚
 * â”‚ Chiller Enable      â”‚ I0.1 â†’ PA1 (Input1) â”‚ ch_safety.c         â”‚
 * â”‚ CHW Flow Status     â”‚ I0.2 â†’ PC6 (Input2) â”‚ ch_safety.c         â”‚
 * â”‚ Phase Monitor       â”‚ I0.3 â†’ PC7 (Input3) â”‚ ch_safety.c         â”‚
 * â”‚ Water Level Low     â”‚ I0.4 â†’ PC4 (Input4) â”‚ ch_safety.c         â”‚
 * â”‚ Water Level High    â”‚ I0.5 â†’ PC5 (Input5) â”‚ ch_safety.c         â”‚
 * â”‚ Door Open           â”‚ I0.6 â†’ PA8 (Input6) â”‚ ch_safety.c         â”‚
 * â”‚ BMS Enable          â”‚ I0.7 â†’ PA9 (Input7) â”‚ ch_safety.c         â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * ========================================================================
 * CONTROL SYSTEM FLOW:
 * ========================================================================
 * 
 * MAIN CONTROL LOOP (ch_control_core.c):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ 1. ChillerControl_Core_Process()                                    â”‚
 * â”‚    â”œâ”€â”€ Check system state and safety                               â”‚
 * â”‚    â”œâ”€â”€ Read sensors (ch_temp_control.c)                           â”‚
 * â”‚    â”œâ”€â”€ Calculate required capacity (ch_temp_control.c)             â”‚
 * â”‚    â”œâ”€â”€ Execute staging decisions (ch_staging.c)                    â”‚
 * â”‚    â”œâ”€â”€ Monitor safety conditions (ch_safety.c)                     â”‚
 * â”‚    â””â”€â”€ Update HMI and status                                       â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * TEMPERATURE CONTROL FLOW (ch_temp_control.c):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ 1. TempControl_Process()                                            â”‚
 * â”‚    â”œâ”€â”€ Read temperature sensors (Modbus integration)               â”‚
 * â”‚    â”œâ”€â”€ Filter and validate sensor readings                         â”‚
 * â”‚    â”œâ”€â”€ Run PID control algorithm                                   â”‚
 * â”‚    â”œâ”€â”€ Apply ambient temperature compensation                       â”‚
 * â”‚    â””â”€â”€ Output required capacity percentage                          â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * STAGING CONTROL FLOW (ch_staging.c):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ 1. Staging_Process()                                                â”‚
 * â”‚    â”œâ”€â”€ Get required capacity from temperature control              â”‚
 * â”‚    â”œâ”€â”€ Calculate required number of compressors                    â”‚
 * â”‚    â”œâ”€â”€ Select which compressors to start/stop (runtime balance)    â”‚
 * â”‚    â”œâ”€â”€ Control condenser banks based on active compressors         â”‚
 * â”‚    â”œâ”€â”€ Execute GPIO relay commands                                  â”‚
 * â”‚    â””â”€â”€ Update equipment status and runtime hours                   â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * SAFETY SYSTEM FLOW (ch_safety.c):
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ 1. Safety_Process()                                                 â”‚
 * â”‚    â”œâ”€â”€ Read safety input signals (GPIO inputs)                     â”‚
 * â”‚    â”œâ”€â”€ Check temperature, pressure, flow limits                    â”‚
 * â”‚    â”œâ”€â”€ Monitor equipment protection parameters                      â”‚
 * â”‚    â”œâ”€â”€ Trigger alarms and protection actions                       â”‚
 * â”‚    â””â”€â”€ Execute emergency stops if required                         â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * ========================================================================
 * FOUR-TIER CAPACITY CONTROL IMPLEMENTATION:
 * ========================================================================
 * 
 * TIER 1 - ECONOMIC (25% Capacity):
 * â”œâ”€â”€ Maximum 2 compressors active
 * â”œâ”€â”€ 2 condenser banks active
 * â”œâ”€â”€ Slower staging delays (energy focused)
 * â””â”€â”€ Higher temperature tolerance
 * 
 * TIER 2 - NORMAL (50% Capacity):
 * â”œâ”€â”€ Maximum 4 compressors active
 * â”œâ”€â”€ 3 condenser banks active
 * â”œâ”€â”€ Standard staging delays
 * â””â”€â”€ Standard temperature control
 * 
 * TIER 3 - FULL (75% Capacity):
 * â”œâ”€â”€ Maximum 6 compressors active
 * â”œâ”€â”€ 4 condenser banks active
 * â”œâ”€â”€ Faster staging delays
 * â””â”€â”€ Tighter temperature control
 * 
 * TIER 4 - CUSTOM (100% Capacity):
 * â”œâ”€â”€ Maximum 8 compressors active
 * â”œâ”€â”€ 4 condenser banks active
 * â”œâ”€â”€ User-configurable parameters
 * â””â”€â”€ Full system capability
 * 
 * ========================================================================
 * INTEGRATION POINTS WITH YOUR EXISTING CODE:
 * ========================================================================
 * 
 * 1. EQUIPMENT_CONFIG INTEGRATION:
 *    â””â”€â”€ All 4 files integrate with your equipment_config.h system
 *    â””â”€â”€ Configuration loaded from flash at startup
 *    â””â”€â”€ Runtime hours tracked and saved to flash
 * 
 * 2. GPIO_MANAGER INTEGRATION:
 *    â””â”€â”€ ch_staging.c uses Relay_Set() for compressor/condenser control
 *    â””â”€â”€ ch_safety.c uses Input_Read() for safety interlock monitoring
 * 
 * 3. MODBUS_SENSOR INTEGRATION:
 *    â””â”€â”€ ch_temp_control.c reads temperature sensors via Modbus
 *    â””â”€â”€ Sensor fault detection and handling
 * 
 * 4. HMI INTEGRATION:
 *    â””â”€â”€ All systems update HMI VP registers
 *    â””â”€â”€ Status, alarms, and control data displayed on HMI
 * 
 * 5. FLASH STORAGE:
 *    â””â”€â”€ Configuration and runtime data saved to 25Q16 flash
 *    â””â”€â”€ Fault history and alarm logs stored
 * 
 * ========================================================================
 * MAIN.C INTEGRATION EXAMPLE:
 * ========================================================================
 * 
 * // In your main.c while(1) loop, add these calls:
 * 
 * void main(void) {
 *     // ... existing initialization ...
 *     
 *     // Initialize chiller control system
 *     ChillerControl_Core_Init();
 *     TempControl_Init();
 *     Staging_Init();
 *     Safety_Init();
 *     
 *     while(1) {
 *         // Existing periodic tasks
 *         Equipment_Config_Process_Periodic_Tasks();
 *         
 *         // Add chiller control tasks
 *         ChillerControl_Core_Process();      // Main control coordinator
 *         Safety_Process();                   // Safety checks (high priority)
 *         TempControl_Process();              // Temperature control
 *         Staging_Process();                  // Equipment staging
 *         
 *         // Process debug commands
 *         UART_Process_Commands();
 *         
 *         HAL_Delay(100);  // 100ms loop time
 *     }
 * }
 * 
 * ========================================================================
 * NEW DEBUG COMMANDS AVAILABLE:
 * ========================================================================
 * 
 * CORE CONTROL:
 * â”œâ”€â”€ "core_status"     - System status and performance
 * â”œâ”€â”€ "core_start"      - Start chiller system
 * â”œâ”€â”€ "core_stop"       - Stop chiller system
 * â””â”€â”€ "core_emergency"  - Emergency stop
 * 
 * TEMPERATURE CONTROL:
 * â”œâ”€â”€ "temp_status"     - Temperature control status
 * â”œâ”€â”€ "temp_setpoint"   - Set return water setpoint
 * â”œâ”€â”€ "temp_sensors"    - Show sensor readings
 * â””â”€â”€ "temp_pid"        - PID controller status
 * 
 * STAGING CONTROL:
 * â”œâ”€â”€ "stage_status"    - Equipment staging status
 * â”œâ”€â”€ "stage_manual"    - Manual equipment control
 * â”œâ”€â”€ "stage_runtime"   - Equipment runtime hours
 * â””â”€â”€ "stage_balance"   - Runtime balancing status
 * 
 * SAFETY SYSTEM:
 * â”œâ”€â”€ "safety_status"   - Safety system status
 * â”œâ”€â”€ "safety_alarms"   - Active alarms
 * â”œâ”€â”€ "safety_test"     - Test safety systems
 * â””â”€â”€ "safety_reset"    - Reset faults and alarms
 * 
 * ========================================================================
 * NEXT STEPS:
 * ========================================================================
 * 
 * 1. Choose which file to implement first (.c files)
 * 2. Start with ch_control_core.c (main system)
 * 3. Then ch_safety.c (safety first!)
 * 4. Then ch_temp_control.c (temperature control)
 * 5. Finally ch_staging.c (equipment control)
 * 
 * Each .c file will be approximately 500-800 lines of well-structured code
 * with full integration to your existing systems.
 */





PS:  we have to go gradually with each file.  coz i have to test its functions. 
so plan is u will create one fille and give me instructions what to test in it in hardware. 
there is debug port to display debug instructions.

âš¡ IMPLEMENTATION PHASES:
ğŸ“… PHASE 1: Foundation (4 files)

equipment_config.h/.c - Base configuration system
flash_config.h/.c - Storage foundation
Done Filles in folder updated

ğŸ“… PHASE 2: Core Control (2 files)

ch_control_core.h/.c - Main system coordinator
Done Filles in folder updated

ğŸ“… PHASE 3: Safety Critical (2 files)

ch_safety.h/.c - Safety systems
Done Filles in folder updated   but it wont show debug data on port


ğŸ“… PHASE 4: Control Systems (4 files)

ch_temp_control.h/.c - Temperature control
Done Filles in folder updated   but it wont show debug data on port

ch_staging.h/.c - Equipment staging

ğŸ“… PHASE 5: Intelligence (4 files)

condenser_manager.h/.c - Smart condenser management
control_algorithms.h/.c - Advanced algorithms

ğŸ“… PHASE 6: Integration (3 files)

Modify main.c and hmi.h for full integration




* ========================================================================
 * Current File we are working on  is      ch_staging.h/.c - Equipment staging
 * ========================================================================
 *  Note that my Main also updated
 * ========================================================================


